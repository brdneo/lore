# Lore N.A. üß†ü§ñ

_Um estudo sobre vida artificial e comportamento emergente em um microverso econ√¥mico autossuficiente_

![Lore N.A. Logo](assets/lore.png)

> _"Wubba Lubba Dub-Dub!"_ - Obrigado Rick and Morty pela inspira√ß√£o

[![Python](https://img.shields.io/badge/Python-3.8+-blue.svg)](https://python.org)
[![Docker](https://img.shields.io/badge/Docker-Ready-blue.svg)](https://docker.com)
[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-13+-336791.svg)](https://postgresql.org)
[![Kong](https://img.shields.io/badge/API_Gateway-Kong-orange.svg)](https://konghq.com)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)

---

## üåü O Conceito

**O que acontece quando voc√™ cria um ecossistema digital completo e o popula com agentes de IA programados n√£o apenas para interagir, mas para desejar, comprar e sentir?**

Lore N.A. n√£o √© um e-commerce tradicional. √â um **laborat√≥rio digital em tempo real**, um terr√°rio de formigas digitais, onde o business existe apenas para servir de palco a um experimento maior: observar os **padr√µes e comportamentos emergentes** que surgem de um conjunto de regras simples aplicadas a uma popula√ß√£o de agentes aut√¥nomos.

### üé≠ Nossa Fun√ß√£o

Nosso papel n√£o √© o de vendedores, mas sim o de **deuses observadores**, assistindo √† lore que esses agentes neurais escrevem com suas intera√ß√µes di√°rias, decis√µes de compra e evolu√ß√£o emocional.

### A Vis√£o

O objetivo final n√£o √© vender produtos fict√≠cios, mas sim **gerar dados** e observar comportamentos emergentes. Dados sobre:

-   üìà **Tend√™ncias de mercado** que nascem e morrem organicamente
-   üêë **Comportamento de manada** e a forma√ß√£o de "influenciadores" digitais
-   ü§ù **Din√¢micas sociais** baseadas em "sentimento" e "confian√ßa" simulados
-   üí∞ **Resili√™ncia econ√¥mica** de um sistema fechado e autossuficiente
-   üß† **Evolu√ß√£o comportamental** de agentes neurais aut√¥nomos

√â um exerc√≠cio de **engenharia de sistemas**, **simula√ß√£o baseada em agentes** e um pouco de **filosofia digital**.

## üèóÔ∏è Arquitetura do Sistema

### Microservi√ßos & Infraestrutura

```mermaid
graph TB
    Kong[ü¶ç Kong Gateway] --> PostgREST[ü§ñ PostgREST API]
    Kong --> AgentRunner[üß† Agent Runner]
    PostgREST --> PostgreSQL[(üêò PostgreSQL)]
    AgentRunner --> PostgreSQL
    AgentRunner --> SentimentService[üòä Sentiment Analysis]

    subgraph "An√°lise de Sentimento H√≠brida"
        SentimentService --> VADER[VADER]
        SentimentService --> TextBlob[TextBlob]
        SentimentService --> Transformers[ü§ó Transformers]
    end
```

### üõ†Ô∏è Stack Tecnol√≥gico

| Componente       | Tecnologia                         | Prop√≥sito                     |
| ---------------- | ---------------------------------- | ----------------------------- |
| **Orquestra√ß√£o** | üê≥ Docker & Compose                | Containeriza√ß√£o e deploy      |
| **API Gateway**  | ü¶ç Kong                            | Roteamento e autentica√ß√£o     |
| **Database**     | üêò PostgreSQL 13+                  | Persist√™ncia de dados         |
| **API REST**     | ü§ñ PostgREST                       | API autom√°tica do banco       |
| **Agentes**      | üêç Python 3.8+                     | L√≥gica dos agentes neurais    |
| **Sentiment AI** | üß† VADER + TextBlob + Transformers | An√°lise de sentimento h√≠brida |
| **Security**     | üîê JWT + Kong Auth                 | Autentica√ß√£o e autoriza√ß√£o    |

## üß† Sistema de Agentes Neurais

### Ciclo de Vida dos Agentes

1. **üå± Inicializa√ß√£o**: Agente nasce com personalidade e recursos b√°sicos
2. **üëÅÔ∏è Observa√ß√£o**: Explora o ambiente e descobre produtos dispon√≠veis
3. **ü§î Decis√£o**: Avalia produtos baseado em necessidades e recursos
4. **üí∞ Transa√ß√£o**: Executa compras quando crit√©rios s√£o atendidos
5. **üòä Sentimento**: Analisa experi√™ncia p√≥s-compra com IA h√≠brida
6. **üìà Evolu√ß√£o**: Atualiza prefer√™ncias baseado em experi√™ncias
7. **üîÑ Repeti√ß√£o**: Inicia novo ciclo com estado atualizado

### IA de An√°lise de Sentimento v3.0

**Sistema H√≠brido Robusto** que combina:

-   **VADER** (25%): An√°lise r√°pida para textos informais e emoticons
-   **TextBlob** (20%): Polaridade e subjetividade
-   **Transformers** (35%): An√°lise contextual estado-da-arte
-   **Contexto** (20%): Qualidade, pre√ßo e expectativas do agente

```python
# Exemplo de resultado
{
    "sentiment_score": 0.587,      # -1 (negativo) a +1 (positivo)
    "emotion_category": "happy",   # Categoria emocional
    "vader_score": 0.783,         # Score VADER
    "textblob_score": 0.000,      # Score TextBlob
    "transformers_score": 0.729,  # Score Transformers
    "review_text": "Produto excelente! Superou expectativas..."
}
```

## üìä Status Atual do Projeto

### ‚úÖ Fase 1: G√™nesis - **CONCLU√çDA**

-   [x] **Infraestrutura**: Microsservi√ßos 100% online e est√°veis
-   [x] **Database**: PostgreSQL com schemas completos (Limbo + Cart√≥rio)
-   [x] **API Gateway**: Kong configurado com autentica√ß√£o JWT
-   [x] **API REST**: PostgREST gerando endpoints autom√°ticos
-   [x] **Agente 001**: Primeiro ciclo de vida completo executado

### ‚úÖ Fase 2: Evolu√ß√£o Neural - **CONCLU√çDA**

-   [x] **Migra√ß√£o de IA**: LeIA removido, sistema h√≠brido implementado
-   [x] **VADER**: An√°lise r√°pida para textos informais (25% peso)
-   [x] **TextBlob**: Polaridade e subjetividade (20% peso)
-   [x] **Transformers**: Modelo BERT multilingual (35% peso)
-   [x] **An√°lise Contextual**: Qualidade, pre√ßo, expectativas (20% peso)
-   [x] **Testes**: Valida√ß√£o em m√∫ltiplos cen√°rios de uso
-   [x] **Documenta√ß√£o**: Guias completos de migra√ß√£o e uso

### üöß Fase 3: Expans√£o - **EM PROGRESSO**

-   [ ] **Popula√ß√£o**: Cria√ß√£o de m√∫ltiplos agentes com personalidades √∫nicas
-   [ ] **Intera√ß√£o Social**: Agentes influenciando uns aos outros
-   [ ] **Economia Din√¢mica**: Pre√ßos flutuando baseado em demanda
-   [ ] **M√©tricas**: Dashboard de observa√ß√£o em tempo real
-   [ ] **Machine Learning**: Agentes aprendendo uns com os outros

## üöÄ Instala√ß√£o R√°pida

### Op√ß√£o 1: Script Autom√°tico (Recomendado)

```bash
# Clone o reposit√≥rio
git clone https://github.com/seu-usuario/lore.git
cd lore

# Execute o script de instala√ß√£o autom√°tica
chmod +x install.sh
./install.sh
```

O script autom√°tico vai:

-   ‚úÖ Verificar depend√™ncias (Docker, Docker Compose)
-   ‚úÖ Criar arquivo `.env` a partir do template
-   ‚úÖ Gerar secrets de seguran√ßa automaticamente
-   ‚úÖ Construir e iniciar todos os containers
-   ‚úÖ Configurar Kong e PostgREST
-   ‚úÖ Configurar ambiente Python dos agentes
-   ‚úÖ Testar conectividade de todos os servi√ßos
-   ‚úÖ Instalar depend√™ncias de IA (VADER, TextBlob, Transformers)

### Op√ß√£o 2: Instala√ß√£o Manual Detalhada

## üöÄ Instala√ß√£o e Configura√ß√£o

### Pr√©-requisitos

-   **Docker** 20.10+ e **Docker Compose** v2
-   **Git** para clonagem do reposit√≥rio
-   **8GB RAM** m√≠nimo (recomendado 16GB para Transformers)
-   **Linux/macOS** (Windows via WSL2)

### 1Ô∏è‚É£ Clone do Reposit√≥rio

```bash
git clone https://github.com/seu-usuario/lore.git
cd lore
```

### 2Ô∏è‚É£ Configura√ß√£o de Ambiente

```bash
# Copie o arquivo de exemplo
cp .env.example .env

# Configure as vari√°veis de ambiente
nano .env
```

**Vari√°veis essenciais no `.env`:**

```env
# Database
POSTGRES_DB=lore_na
POSTGRES_USER=lore_admin
POSTGRES_PASSWORD=sua_senha_super_segura

# Kong
KONG_DATABASE=postgres
KONG_PG_HOST=postgres
KONG_PG_DATABASE=kong

# JWT
JWT_SECRET=seu_jwt_secret_muito_longo_e_seguro
```

### 3Ô∏è‚É£ Inicializa√ß√£o dos Servi√ßos

```bash
# Construir e iniciar todos os containers
docker-compose up -d

# Verificar se todos os servi√ßos est√£o rodando
docker-compose ps

# Logs dos servi√ßos (opcional)
docker-compose logs -f
```

### 4Ô∏è‚É£ Configura√ß√£o do Database

```bash
# Aplicar schemas iniciais
docker-compose exec postgres psql -U $POSTGRES_USER -d $POSTGRES_DB -f /docker-entrypoint-initdb.d/00-initial-schema.sql

# Aplicar schema do MVM (agentes)
docker-compose exec postgres psql -U $POSTGRES_USER -d $POSTGRES_DB -f /docker-entrypoint-initdb.d/01-mvm-schema.sql
```

### 5Ô∏è‚É£ Configura√ß√£o do Kong (API Gateway)

```bash
# Aplicar configura√ß√£o do Kong
curl -X POST http://localhost:8001/config \
  -F config=@infra/kong.yml

# Verificar servi√ßos configurados
curl http://localhost:8001/services
```

### 6Ô∏è‚É£ Teste de Conectividade

```bash
# Testar API PostgREST
curl http://localhost:8000/

# Testar atrav√©s do Kong
curl http://localhost:8080/api/

# Verificar agentes (se houver)
curl http://localhost:8080/api/agents
```

## üß™ Executando os Agentes

### Configura√ß√£o do Ambiente Python

```bash
# Entrar no diret√≥rio dos agentes
cd services/agent_runner

# Criar ambiente virtual
python3 -m venv .venv
source .venv/bin/activate  # Linux/macOS
# .venv\Scripts\activate   # Windows

# Instalar depend√™ncias
pip install -r requirements.txt
```

### Teste do Sistema de Sentimento

```bash
# Testar bibliotecas de IA
python test_sentiment_libs.py

# Testar servi√ßo completo
python test_sentiment_service.py
```

### Executar um Agente

```bash
# Executar agente b√°sico
python main.py --agent-id agent_001

# Executar com configura√ß√µes espec√≠ficas
python frugal_agent.py --wallet 100 --personality conservative
```

## üìà Monitoramento e Observa√ß√£o

### Logs dos Servi√ßos

```bash
# Logs em tempo real
docker-compose logs -f

# Logs espec√≠ficos
docker-compose logs postgres
docker-compose logs kong
docker-compose logs agent_runner
```

### Database Inspection

```bash
# Conectar ao PostgreSQL
docker-compose exec postgres psql -U $POSTGRES_USER -d $POSTGRES_DB

# Comandos SQL √∫teis
\dt                    # Listar tabelas
SELECT * FROM agents;  # Ver agentes
SELECT * FROM transactions; # Ver transa√ß√µes
```

### APIs de Monitoramento

```bash
# Status dos agentes
curl http://localhost:8080/api/agents

# Transa√ß√µes recentes
curl http://localhost:8080/api/transactions?order=created_at.desc&limit=10

# Produtos no limbo
curl http://localhost:8080/api/limbo
```

## üîß Desenvolvimento e Contribui√ß√£o

### Estrutura do Projeto

```
lore/
‚îú‚îÄ‚îÄ üìÅ assets/                 # Recursos visuais
‚îú‚îÄ‚îÄ üìÅ infra/                  # Configura√ß√µes de infraestrutura
‚îÇ   ‚îî‚îÄ‚îÄ kong.yml              # Config do API Gateway
‚îú‚îÄ‚îÄ üìÅ logs/                   # Logs dos servi√ßos
‚îú‚îÄ‚îÄ üìÅ scripts/                # Scripts de utilidade
‚îÇ   ‚îú‚îÄ‚îÄ generate-secrets.py   # Gera√ß√£o de segredos
‚îÇ   ‚îî‚îÄ‚îÄ security-audit.py     # Auditoria de seguran√ßa
‚îú‚îÄ‚îÄ üìÅ services/               # Microsservi√ßos
‚îÇ   ‚îî‚îÄ‚îÄ agent_runner/         # Servi√ßo dos agentes neurais
‚îÇ       ‚îú‚îÄ‚îÄ main.py           # Agente principal
‚îÇ       ‚îú‚îÄ‚îÄ frugal_agent.py   # Agente econ√¥mico
‚îÇ       ‚îú‚îÄ‚îÄ sentiment_service.py # IA de sentimento
‚îÇ       ‚îî‚îÄ‚îÄ requirements.txt  # Depend√™ncias Python
‚îú‚îÄ‚îÄ üìÅ supabase/              # Database e volumes
‚îÇ   ‚îî‚îÄ‚îÄ volumes/
‚îÇ       ‚îú‚îÄ‚îÄ db/init/          # Scripts de inicializa√ß√£o
‚îÇ       ‚îî‚îÄ‚îÄ api/              # Configura√ß√µes PostgREST
‚îú‚îÄ‚îÄ docker-compose.yml        # Orquestra√ß√£o dos containers
‚îú‚îÄ‚îÄ secrets.json             # Configura√ß√µes sens√≠veis
‚îî‚îÄ‚îÄ README.md                # Esta documenta√ß√£o
```

### Adicionando Novos Agentes

1. **Criar novo arquivo** em `services/agent_runner/`
2. **Herdar de `BaseAgent`** para funcionalidades b√°sicas
3. **Implementar l√≥gica** espec√≠fica de decis√£o
4. **Testar** com diferentes cen√°rios

```python
from base_agent import BaseAgent

class MeuNovoAgente(BaseAgent):
    def __init__(self, agent_id: str):
        super().__init__(agent_id)
        self.personalidade = "aventureiro"

    async def make_decision(self, products):
        # Sua l√≥gica de decis√£o aqui
        return produto_escolhido
```

### Contribuindo

1. **Fork** este reposit√≥rio
2. **Crie uma branch** para sua feature (`git checkout -b feature/nova-feature`)
3. **Commit** suas mudan√ßas (`git commit -m 'Adiciona nova feature'`)
4. **Push** para a branch (`git push origin feature/nova-feature`)
5. **Abra um Pull Request**

## üõ°Ô∏è Seguran√ßa

### Boas Pr√°ticas Implementadas

-   ‚úÖ **Autentica√ß√£o JWT** em todas as APIs
-   ‚úÖ **Secrets** gerenciados externamente
-   ‚úÖ **Database** com credenciais seguras
-   ‚úÖ **Kong** como proxy reverso
-   ‚úÖ **Containers** isolados
-   ‚úÖ **Logs** estruturados para auditoria

### Configura√ß√µes de Seguran√ßa

```bash
# Gerar novos secrets
python scripts/generate-secrets.py

# Executar auditoria de seguran√ßa
python scripts/security-audit.py

# Backup dos secrets
cp secrets.json secrets.backup.json
```

## üêõ Troubleshooting

### Problemas Comuns

**üî¥ Container n√£o inicia**

```bash
# Verificar logs
docker-compose logs nome_do_servico

# Reconstruir container
docker-compose build --no-cache nome_do_servico
```

**üî¥ Erro de conex√£o com database**

```bash
# Verificar se PostgreSQL est√° rodando
docker-compose ps postgres

# Testar conex√£o manual
docker-compose exec postgres psql -U $POSTGRES_USER -d $POSTGRES_DB
```

**üî¥ Kong n√£o responde**

```bash
# Verificar status
curl http://localhost:8001/status

# Recriar configura√ß√£o
curl -X POST http://localhost:8001/config -F config=@infra/kong.yml
```

**üî¥ Agente falha na an√°lise de sentimento**

```bash
# Verificar depend√™ncias
cd services/agent_runner
pip list | grep -E "(vader|textblob|transformers)"

# Teste isolado
python test_sentiment_libs.py
```

### Performance

**Para otimizar performance:**

-   **Aumente a RAM** dispon√≠vel para Docker
-   **Use SSD** para volumes persistentes
-   **Configure** `DOCKER_BUILDKIT=1` para builds mais r√°pidos
-   **Monitore** uso de recursos com `docker stats`

## üìö Documenta√ß√£o Adicional

-   üìÑ [Migra√ß√£o do Sistema de Sentimento](MIGRACAO-SENTIMENTO.md)
-   üîí [Relat√≥rio de Seguran√ßa](SECURITY-REPORT-FINAL.md)
-   üõ†Ô∏è [Logs de Desenvolvimento](logs/)

## ü§ù Comunidade e Suporte

### Como Obter Ajuda

1. **Issues**: Para bugs e sugest√µes
2. **Discussions**: Para d√∫vidas e ideias
3. **Wiki**: Para documenta√ß√£o detalhada
4. **Discord**: Para chat em tempo real (em breve)

### Roadmap

-   üéØ **Q3 2025**: Popula√ß√£o de 100+ agentes √∫nicos
-   üéØ **Q4 2025**: Sistema de influ√™ncia social entre agentes
-   üéØ **Q1 2026**: Dashboard web para observa√ß√£o em tempo real
-   üéØ **Q2 2026**: Machine Learning para evolu√ß√£o comportamental

## üìú Licen√ßa

Este projeto est√° licenciado sob a **MIT License** - veja o arquivo [LICENSE](LICENSE) para detalhes.

## üôè Agradecimentos

-   **Rick and Morty** pela inspira√ß√£o sobre universos artificiais
-   **Comunidade Open Source** pelas ferramentas incr√≠veis
-   **Docker** por tornar deployment simples
-   **Hugging Face** pelos modelos de IA acess√≠veis
-   **Todos os contribuidores** que tornaram este projeto poss√≠vel

---

## üåü Star este projeto!

Se voc√™ achou o Lore N.A. interessante, considere dar uma ‚≠ê para apoiar o desenvolvimento!

**Vamos observar juntos o que emerge quando c√≥digo ganha vida! üß†‚ú®**

---

_Feito com ‚ù§Ô∏è por desenvolvedores curiosos sobre vida artificial_

_√öltima atualiza√ß√£o: 25 de junho de 2025_
